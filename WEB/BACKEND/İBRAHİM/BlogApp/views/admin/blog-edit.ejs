<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('../partials/head.ejs') %>
</head>

<body>
    <!-- navigation -->
    <%- include("../partials/nav") %>

        <div class="conatiner mt-3">
            <div class="card">
                <div class="card-body">
                    <div class="row justify-content-center">
                        <div class="col-md-6">
                            <h1 class="h3 mb-3">GÜNCELLE - <%= blog.title %>
                            </h1>
                            <form method="post" action="/admin/blogs/edit" enctype="multipart/form-data">
                                <input type="hidden" value="<%= blog.id %>" name="blogid">
                                <div class="form-group row mb-4">
                                    <label class="col-sm-2 col-form-label">Başlık</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" id="title" value="<%= blog.title %>"
                                            name="title" placeholder="Başlık...">
                                    </div>
                                </div>

                                <div class="form-group row mb-4">
                                    <label class="col-sm-2 col-form-label">Açıklama</label>
                                    <div class="col-sm-10">
                                        <textarea type="text" style="height: 200px;" class="form-control" id="editor"
                                            name="description"
                                            placeholder="Açıklama..."><%= blog.description %></textarea>
                                    </div>
                                </div>

                                <div class="form-group row mb-4">
                                    <label class="col-sm-2 col-form-label">Resim</label>
                                    <div class="col-sm-10">
                                        <span class="opacity-50">Yeni resim
                                            seçmezseniz var olan resim kalmaya devam edecektir.</span>
                                        <img src="/images/<%= blog.imagePath %>" alt="" class="img-fluid">
                                        <hr>
                                        <input type="file" class="form-control" id="image" name="image"
                                            value="/images/<%= blog.imagePath %>">
                                    </div>
                                </div>

                                <div class="form-group row mb-4">
                                    <label class="col-sm-2 col-form-label">Kategori</label>
                                    <div class="col-sm-10">
                                        <select name="category" id="category" class="form-select">
                                            <% categories.forEach(category=> { %>
                                                <option value="<%= category.id %>" <%=category.id==blog.category.id
                                                    ? 'selected' : '' %>
                                                    >
                                                    <%= category.name %>
                                                </option>
                                                <% }) %>
                                        </select>

                                    </div>
                                </div>

                                <div class="form-group row mb-4">
                                    <label class="col-sm-2 col-form-label">Anasayfa görünümü</label>
                                    <div class="col-sm-10">
                                        <input type="checkbox" class="form-check-input" id="homepage" name="homepage"
                                            <%=blog.homepage==1 ? 'checked' :'' %>
                                        >
                                        <label class="form-check-label">Bloğum anasayfada görünsün</label>
                                    </div>
                                </div>

                                <div class="row col-sm-3 offset-sm-5">
                                    <button type="submit" class="btn btn-primary">KAYDET</button>
                                </div>

                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script>
            ClassicEditor
                .create(document.querySelector('#editor'))
                .catch(error => {
                    console.error(error);
                });
        </script>

</body>

</html>